(function(r,a,S,t,b,l){"use strict";const{ScrollView:v}=l.General,{FormSwitchRow:D}=l.Forms;function R(){return b.useProxy(a.storage),React.createElement(v,{style:{flex:1}},React.createElement(D,{label:"Play on reactions",value:a.storage.allowReactions??!0,onValueChange:function(e){a.storage.allowReactions=e}}))}const{DCDSoundManager:o}=t.ReactNative.NativeModules,d=S.findByStoreName("SelectedChannelStore"),y="https://raw.githubusercontent.com/Metastruct/garrysmod-chatsounds/master/sound/chatsounds/autoadd/memes/overused%20thud.ogg",s=6969;let m=-1;const A=function(){return new Promise(function(e){return o.prepare(y,"notification",s,function(c,n){return e(n)})})};let i=null,u=!1;async function f(){u&&(i!=null&&clearTimeout(i),o.stop(s),u=!1),u=!0,await o.play(s),i=setTimeout(function(){u=!1,o.stop(s),i=null},m)}function h(e){if(e.message.content&&e.channelId==d.getChannelId()&&!e.message.state&&e.sendMessageOptions==null){let c=(e.message.content.match(/ðŸ—¿/g)??[]).length;if(c+=(e.message.content.match(/<a?:.*?moy?ai.*?:.+?>/gi)??[]).length,c>0)for(let n=0;n<c;n++)setTimeout(f,n*350)}}function g(e){(a.storage.allowReactions??!0)&&e.channelId==d.getChannelId()&&(e.emoji.name=="\u{1F5FF}"||e.emoji.name.match(/.*?moy?ai.*?/i))&&!e.optimistic&&f()}let E=!1;var p={onLoad:function(){E||A().then(function(e){E=!0,m=e.duration}),t.FluxDispatcher.subscribe("MESSAGE_CREATE",h),t.FluxDispatcher.subscribe("MESSAGE_REACTION_ADD",g)},onUnload:function(){t.FluxDispatcher.unsubscribe("MESSAGE_CREATE",h),t.FluxDispatcher.unsubscribe("MESSAGE_REACTION_ADD",g)},settings:R};return r.default=p,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.components);
